{"version":3,"sources":["assets\\sprite\\build.js"],"names":["cc","Class","Component","properties","rect0","Prefab","rect1","rect2","rect3","rect4","rect5","rect6","rect7","player","basepoint","button","Label","score","over","Node","sliderv","Slider","audio","AudioClip","subNodesArr","type","onLoad","log","collider","director","getCollisionManager","enabled","physics","getPhysicsManager","db","PhysicsManager","DrawBits","nodes","find","children","gameState","scoreNum","leftX","rightX","speed","direction","snakeArrX","snakeArrY","snakeArr","nextGoal","Math","floor","random","goalX","goalY","snakeHead","instantiate","getComponent","node","x","y","Group","box","addChild","boxMap","i","j","systemEvent","on","SystemEvent","EventType","KEY_DOWN","onKeyDown","setGame","TOUCH_START","event","location","getLocation","firstX","firstY","TOUCH_END","touchPoint","endX","endY","abs","goal","buildBody","onBeginContact","contact","selfCollider","otherCollider","console","produceFoot","schedule","move","overlapFoot","length","prefab","snakeBody","boxMapX","boxMapY","eatFoot","len","addScore","string","isGameOver","moveAll","onCollisionEnter","other","self","keyCode","macro","KEY","a","left","d","right","w","up","s","down","gameOver","active","unschedule","audioEngine","stopAll","pause","replay","loadScene"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        rect0:cc.Prefab,\r\n        rect1:cc.Prefab,\r\n        rect2:cc.Prefab,\r\n        rect3:cc.Prefab,\r\n        rect4:cc.Prefab,\r\n        rect5:cc.Prefab,\r\n        rect6:cc.Prefab,\r\n        rect7:cc.Prefab,\r\n       //播放预制资源\r\n       player:cc.Prefab,\r\n       basepoint:cc.Prefab,\r\n       //按钮节点\r\n       button:cc.Label,\r\n       score:cc.Label,\r\n       over:cc.Node,\r\n       //速度调节滑动\r\n       sliderv:cc.Slider,\r\n       //音频\r\n       audio:cc.AudioClip,\r\n\r\n       subNodesArr:{\r\n            default:[],\r\n            type:cc.Prefab,\r\n       }\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n    onLoad () {\r\n        cc.log(\"onload start\");\r\n\r\n        var collider = cc.director.getCollisionManager();\r\n        collider.enabled = true;\r\n        // collider.enabledDebugDraw = true;\r\n        // collider.enabledDrawBoundingBox = true;\r\n\r\n        //开启物理引擎\r\n        var physics = cc.director.getPhysicsManager();\r\n        physics.enabled = true;\r\n        // physics.gravity.y = 1000;\r\n        var db = cc.PhysicsManager.DrawBits;\r\n\r\n        this.nodes = [];\r\n        this.nodes = cc.find('Canvas/box').children;\r\n\r\n        //游戏状态  0-暂停 1-运行 2-游戏结束 \r\n        this.gameState = 1;\r\n        cc.director.getCollisionManager().enabled = true;\r\n        cc.director.getPhysicsManager().enabled = true;\r\n        //音效\r\n        //cc.audioEngine.playEffect(this.audio, true);\r\n        //分数\r\n        this.scoreNum=0;\r\n        //边界值\r\n        this.leftX;\r\n        this.rightX;\r\n        //速度\r\n        this.speed=0.5;\r\n        //方向,up-0,down-1,left-2,right-3\r\n        this.direction = 0;\r\n        //贪吃蛇数组,二位数组\r\n        this.snakeArrX=[];\r\n        this.snakeArrY=[];\r\n        this.snakeArr=[];\r\n        //地图上随机生成果实(x,y)坐标\r\n        this.nextGoal = Math.floor(7*Math.random());\r\n        this.goalX = Math.floor(10*Math.random());\r\n        this.goalY = Math.floor(15*Math.random());\r\n        //设置贪吃蛇头部\r\n         this.snakeHead = cc.instantiate(this.rect7).getComponent('rect');\r\n         this.snakeHead.node.x=240;\r\n         this.snakeHead.node.y=336;\r\n         this.snakeHead.node.Group = 'hero';\r\n\r\n         var box=cc.find('Canvas/box');\r\n         box.addChild(this.snakeHead.node);\r\n         this.snakeArrX[0]=this.snakeHead.node.x;\r\n         this.snakeArrY[0]=this.snakeHead.node.y;\r\n         this.snakeArr[0] = this.snakeHead;\r\n         //地图\r\n         this.boxMap=[];\r\n         for(let i=0;i<10;i++){\r\n            this.boxMap[i]=[];\r\n            for(let j=0;j<15;j++){\r\n                this.boxMap[i][j]=0;\r\n            }\r\n         }\r\n        //注册按下监听\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n       //this.ontouchmove();\r\n       this.setGame();\r\n\r\n\r\n        this.node.on(cc.Node.EventType.TOUCH_START,function(event){\r\n            let location = event.getLocation();// 获取节点坐标\r\n            this.firstX = location.x;\r\n            this.firstY = location.y;\r\n            // 获取触点在空间节点上的坐标\r\n            // var tempPlayer = node.parent.convertToNodeSpaceAR(location);\r\n            // node.setPosition(tempPlayer);\r\n        },this);\r\n\r\n        this.node.on(cc.Node.EventType.TOUCH_END,function(event){\r\n            let touchPoint = event.getLocation();\r\n            let endX = this.firstX - touchPoint.x;\r\n            let endY = this.firstY - touchPoint.y;\r\n            // var tempPlayer = node.parent.convertToNodeSpaceAR(touchPoint);\r\n            // node.setPosition(tempPlayer);\r\n\r\n            if (Math.abs(endX) > Math.abs(endY)){\r\n                //手势向左右\r\n                //判断向左还是向右 \r\n                if (endX  > 0){\r\n                    //向左函数\r\n                    cc.log('left');\r\n                    if(this.direction!=3){\r\n                        this.direction=2;\r\n                    }\r\n                } else {\r\n                    //向右函数\r\n                    cc.log('right');\r\n                    if(this.direction!=2){\r\n                     this.direction=3;\r\n                    }\r\n                }\r\n            } else {\r\n                //手势向上下\r\n                //判断手势向上还是向下\r\n                if (endY  > 0){\r\n                    //向下函数\r\n                    cc.log('down');\r\n                    if(this.direction!=0){\r\n                        this.direction=1;\r\n                    }\r\n                } else {\r\n                    //向上函数\r\n                    cc.log('up');\r\n                    if(this.direction!=1){\r\n                     this.direction=0;\r\n                    }\r\n                }\r\n             }\r\n        },this);\r\n\r\n    },\r\n    //\r\n    setGame(){\r\n        cc.log(\"setGame start\");\r\n         //下个果实方块\r\n         var goal = this.nextGoal;\r\n         this.buildBody(goal);\r\n         cc.log(\"setGame end\");\r\n    },\r\n\r\n    onBeginContact(contact, selfCollider, otherCollider){\r\n        console.log(\"onBeginContact\");\r\n    },\r\n    \r\n\r\n    //获取颜色后实例化6种图像,还有一个种作为head\r\n    buildBody(goal){\r\n        cc.log(\"goal:\"+goal);\r\n         this.produceFoot();\r\n         //移动\r\n         this.schedule(this.move,this.speed);\r\n         cc.log(\"goal2:\"+goal);\r\n\r\n    },\r\n    //检测果实生成位置是否重叠贪吃蛇\r\n    overlapFoot(){\r\n        this.goalX = Math.floor(10*Math.random());\r\n        this.goalY = Math.floor(15*Math.random());\r\n        //判断贪吃蛇所有部位是否重叠\r\n        for(let j=0;j<this.snakeArrX.length;j++){\r\n            if(this.boxMap[this.goalX][this.goalY]===1){\r\n                //重新生成，并且重新检测\r\n                this.overlapFoot();\r\n                break;\r\n            }\r\n        }\r\n        this.produceFoot();\r\n    },\r\n    //生成果实\r\n    produceFoot(){\r\n        this.nextGoal = Math.floor(7*Math.random());\r\n        //随机生成某种颜色\r\n         if(this.nextGoal===0){this.prefab=this.rect0;}\r\n         if(this.nextGoal===1){this.prefab=this.rect1;}\r\n         if(this.nextGoal===2){this.prefab=this.rect2;}\r\n         if(this.nextGoal===3){this.prefab=this.rect3;}\r\n         if(this.nextGoal===4){this.prefab=this.rect4;}\r\n         if(this.nextGoal===5){this.prefab=this.rect5;}\r\n         if(this.nextGoal===6){this.prefab=this.rect6;}\r\n        //贪吃蛇身体\r\n         this.snakeBody = cc.instantiate(this.prefab).getComponent('rect');\r\n         var box=cc.find('Canvas/box');\r\n         box.addChild(this.snakeBody.node);\r\n         this.snakeBody.node.x=this.goalX*48;       \r\n         this.snakeBody.node.y=this.goalY*48;\r\n         //记录地图这里已经有果实\r\n         var boxMapX = this.snakeBody.node.x/48;\r\n         var boxMapY = this.snakeBody.node.y/48;\r\n         this.boxMap[boxMapX][boxMapY]=1;\r\n    },\r\n    //吃到果实\r\n    eatFoot(){\r\n         var boxMapX = this.snakeHead.node.x/48;\r\n         var boxMapY = this.snakeHead.node.y/48;\r\n        //判断是否位置是否有果实\r\n        if(this.boxMap[boxMapX][boxMapY]===1){\r\n            //cc.log(\"位置有果实\");\r\n            //加在尾部\r\n            var len = this.snakeArrX.length;\r\n            this.snakeArrX[len]=this.snakeBody.node.x;\r\n            this.snakeArrY[len]=this.snakeBody.node.y;\r\n            this.snakeArr[len]=this.snakeBody;\r\n            //果实被吃了 \r\n            this.boxMap[boxMapX][boxMapY]=0;\r\n            //加分数\r\n            this.addScore();\r\n            //随机生成下一个果实\r\n            this.overlapFoot();\r\n        }\r\n    },\r\n    //加分数\r\n    addScore(){\r\n        //根据不同果实增加分数\r\n        if(this.nextGoal===0){this.scoreNum+=50;}\r\n        if(this.nextGoal===1){this.scoreNum+=100;}\r\n        if(this.nextGoal===2){this.scoreNum+=200;}\r\n        if(this.nextGoal===3){this.scoreNum+=300;}\r\n        if(this.nextGoal===4){this.scoreNum+=400;}\r\n        if(this.nextGoal===5){this.scoreNum+=500;}\r\n        if(this.nextGoal===6){this.scoreNum+=600;}\r\n        this.score.string=this.scoreNum;\r\n    },\r\n    //移动方法\r\n    move (){\r\n        //方向,up-0,down-1,left-2,right-3\r\n        if(this.direction===0){\r\n            //移动前，判断游戏是否结束\r\n            this.isGameOver(this.snakeHead.node.x,this.snakeHead.node.y+48);\r\n            if(this.gameState===1){\r\n                this.snakeHead.node.y+=48; \r\n            }\r\n            //cc.log(\"up\");\r\n        }else if(this.direction===1){\r\n            //移动前，判断游戏是否结束\r\n            this.isGameOver(this.snakeHead.node.x,this.snakeHead.node.y-48);\r\n               \r\n            if(this.gameState===1){\r\n                this.snakeHead.node.y-=48;\r\n            }\r\n           // cc.log(\"down\");\r\n        }else if(this.direction===2){\r\n            this.isGameOver(this.snakeHead.node.x-48,this.snakeHead.node.y);\r\n            \r\n            if(this.gameState===1){\r\n                this.snakeHead.node.x-=48;\r\n            }\r\n            //cc.log(\"left\");\r\n        }else if(this.direction===3){\r\n            //移动前，判断游戏是否结束\r\n            this.isGameOver(this.snakeHead.node.x+48,this.snakeHead.node.y);\r\n             \r\n            if(this.gameState===1){\r\n                this.snakeHead.node.x+=48;\r\n            }\r\n            //cc.log(\"right\");\r\n        }\r\n        if(this.gameState===1){\r\n            this.eatFoot();\r\n            this.moveAll();\r\n        }\r\n    },\r\n    //移动的时候，身体也向头移动\r\n    moveAll(){\r\n        for(let i=this.snakeArrX.length-1;i>0;i--){\r\n            this.snakeArrX[i]=this.snakeArrX[i-1];\r\n            this.snakeArrY[i]=this.snakeArrY[i-1];\r\n        }\r\n        //更新贪吃蛇头部位置,贪吃蛇随头部移动\r\n        this.snakeArrX[0]=this.snakeHead.node.x;\r\n        this.snakeArrY[0]=this.snakeHead.node.y;\r\n        for(let j=1;j<this.snakeArrX.length;j++){\r\n            this.snakeArr[j].node.x=this.snakeArrX[j];\r\n            this.snakeArr[j].node.y=this.snakeArrY[j];\r\n        }\r\n        //cc.log(\"moveAll\"+this.snakeArrX.length);\r\n    },\r\n\r\n    onCollisionEnter(other, self) {\r\n        console.log(\"碰撞  =\" + other);\r\n    },\r\n\r\n    //键盘监听\r\n    onKeyDown (event) {\r\n            switch(event.keyCode) {\r\n                case cc.macro.KEY.a:\r\n                case cc.macro.KEY.left:\r\n                   // cc.log(\"key code is  a and left\");\r\n                   if(this.direction!=3){\r\n                        this.direction=2;\r\n                   }\r\n                    break;\r\n                case cc.macro.KEY.d:\r\n                case cc.macro.KEY.right:\r\n                  // cc.log(\"key code is  d and right\");\r\n                   if(this.direction!=2){\r\n                     this.direction=3;\r\n                   }\r\n                    break;\r\n                case cc.macro.KEY.w:\r\n                case cc.macro.KEY.up:\r\n                   // cc.log(\"key code is  w and up\");\r\n                    if(this.direction!=1){\r\n                     this.direction=0;\r\n                    }\r\n                    break;\r\n                case cc.macro.KEY.s:\r\n                case cc.macro.KEY.down:\r\n                   // cc.log(\"key code is  s and down\");\r\n                    if(this.direction!=0){\r\n                        this.direction=1;\r\n                    }\r\n                    break;\r\n            }\r\n    },\r\n    //判断游戏结束的条件\r\n    isGameOver(x,y){\r\n         //判断是否超出地图\r\n        if(x<0 || x>=480 || y<0 || y>=720){\r\n            this.gameOver();\r\n            return;\r\n        }\r\n\r\n\r\n        //判断是否碰撞到贪吃蛇身体\r\n        for(let i=0;i<this.snakeArrX.length;i++){\r\n            if(this.snakeArrX[i]==x && this.snakeArrY[i]==y){\r\n                this.gameOver();\r\n                return;\r\n            }\r\n        }\r\n    },\r\n    //游戏结束\r\n    gameOver (){\r\n            cc.log(\"结束\");\r\n            //游戏状态\r\n            this.gameState = 2;\r\n            //将失败的画面显示出来\r\n            this.over.active=true;\r\n            //停止移动\r\n            this.unschedule(this.move);\r\n            //停止所有音乐\r\n            cc.audioEngine.stopAll();\r\n        \r\n    },\r\n    //暂停游戏\r\n    pause(){\r\n        //2表示游戏结束\r\n        if(this.gameState!==2){\r\n            if(this.gameState===1){\r\n                this.gameState=0;\r\n                this.button.string = \"Play\";\r\n                //停止移动\r\n                this.unschedule(this.move);\r\n            }else if(this.gameState===0){\r\n                this.gameState=1;\r\n                this.button.string = \"Pause\";\r\n                //停止移动\r\n                this.schedule(this.move,this.speed);\r\n            }\r\n        }\r\n    },\r\n    //重新开始游戏\r\n    replay(){\r\n         //重新加载游戏场景\r\n        cc.director.loadScene(\"snaker\");\r\n    },\r\n});\r\n\r\n"]}