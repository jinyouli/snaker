window.__require=function t(e,s,i){function a(n,r){if(!s[n]){if(!e[n]){var h=n.split("/");if(h=h[h.length-1],!e[h]){var c="function"==typeof __require&&__require;if(!r&&c)return c(h,!0);if(o)return o(h,!0);throw new Error("Cannot find module '"+n+"'")}n=h}var d=s[n]={exports:{}};e[n][0].call(d.exports,function(t){return a(e[n][1][t]||t)},d,d.exports,t,e,s,i)}return s[n].exports}for(var o="function"==typeof __require&&__require,n=0;n<i.length;n++)a(i[n]);return a}({build:[function(t,e,s){"use strict";cc._RF.push(e,"0d94fvvIxZFNogXnBYdjx/r","build"),cc.Class({extends:cc.Component,properties:{rect0:cc.Prefab,rect1:cc.Prefab,rect2:cc.Prefab,rect3:cc.Prefab,rect4:cc.Prefab,rect5:cc.Prefab,rect6:cc.Prefab,rect7:cc.Prefab,player:cc.Prefab,basepoint:cc.Prefab,button:cc.Label,score:cc.Label,over:cc.Node,sliderv:cc.Slider,audio:cc.AudioClip},onLoad:function(){cc.log("onload start"),this.gameState=1,cc.audioEngine.playEffect(this.audio,!0),this.scoreNum=0,this.leftX,this.rightX,this.speed=.5,this.direction=0,this.snakeArrX=[],this.snakeArrY=[],this.snakeArr=[],this.nextGoal=Math.floor(7*Math.random()),this.goalX=Math.floor(10*Math.random()),this.goalY=Math.floor(15*Math.random()),this.snakeHead=cc.instantiate(this.rect7).getComponent("rect"),this.snakeHead.node.x=240,this.snakeHead.node.y=336,cc.find("Canvas/box").addChild(this.snakeHead.node),this.snakeArrX[0]=this.snakeHead.node.x,this.snakeArrY[0]=this.snakeHead.node.y,this.snakeArr[0]=this.snakeHead,this.boxMap=[];for(var t=0;t<10;t++){this.boxMap[t]=[];for(var e=0;e<15;e++)this.boxMap[t][e]=0}this.setGame(),this.node.on(cc.Node.EventType.TOUCH_START,function(t){var e=t.getLocation();this.firstX=e.x,this.firstY=e.y},this),this.node.on(cc.Node.EventType.TOUCH_END,function(t){var e=t.getLocation(),s=this.firstX-e.x,i=this.firstY-e.y;Math.abs(s)>Math.abs(i)?s>0?(cc.log("left"),3!=this.direction&&(this.direction=2)):(cc.log("right"),2!=this.direction&&(this.direction=3)):i>0?(cc.log("down"),0!=this.direction&&(this.direction=1)):(cc.log("up"),1!=this.direction&&(this.direction=0))},this)},setGame:function(){cc.log("setGame start");var t=this.nextGoal;this.buildBody(t),cc.log("setGame end")},buildBody:function(t){cc.log("goal:"+t),this.produceFoot(),this.schedule(this.move,this.speed),cc.log("goal2:"+t)},overlapFoot:function(){this.goalX=Math.floor(10*Math.random()),this.goalY=Math.floor(15*Math.random());for(var t=0;t<this.snakeArrX.length;t++)if(1===this.boxMap[this.goalX][this.goalY]){this.overlapFoot();break}this.produceFoot()},produceFoot:function(){this.nextGoal=Math.floor(7*Math.random()),0===this.nextGoal&&(this.prefab=this.rect0),1===this.nextGoal&&(this.prefab=this.rect1),2===this.nextGoal&&(this.prefab=this.rect2),3===this.nextGoal&&(this.prefab=this.rect3),4===this.nextGoal&&(this.prefab=this.rect4),5===this.nextGoal&&(this.prefab=this.rect5),6===this.nextGoal&&(this.prefab=this.rect6),this.snakeBody=cc.instantiate(this.prefab).getComponent("rect"),cc.find("Canvas/box").addChild(this.snakeBody.node),this.snakeBody.node.x=48*this.goalX,this.snakeBody.node.y=48*this.goalY;var t=this.snakeBody.node.x/48,e=this.snakeBody.node.y/48;this.boxMap[t][e]=1},eatFoot:function(){var t=this.snakeHead.node.x/48,e=this.snakeHead.node.y/48;if(1===this.boxMap[t][e]){var s=this.snakeArrX.length;this.snakeArrX[s]=this.snakeBody.node.x,this.snakeArrY[s]=this.snakeBody.node.y,this.snakeArr[s]=this.snakeBody,this.boxMap[t][e]=0,this.addScore(),this.overlapFoot()}},addScore:function(){0===this.nextGoal&&(this.scoreNum+=50),1===this.nextGoal&&(this.scoreNum+=100),2===this.nextGoal&&(this.scoreNum+=200),3===this.nextGoal&&(this.scoreNum+=300),4===this.nextGoal&&(this.scoreNum+=400),5===this.nextGoal&&(this.scoreNum+=500),6===this.nextGoal&&(this.scoreNum+=600),this.score.string=this.scoreNum},move:function(){0===this.direction?(this.isGameOver(this.snakeHead.node.x,this.snakeHead.node.y+48),1===this.gameState&&(this.snakeHead.node.y+=48)):1===this.direction?(this.isGameOver(this.snakeHead.node.x,this.snakeHead.node.y-48),1===this.gameState&&(this.snakeHead.node.y-=48)):2===this.direction?(this.isGameOver(this.snakeHead.node.x-48,this.snakeHead.node.y),1===this.gameState&&(this.snakeHead.node.x-=48)):3===this.direction&&(this.isGameOver(this.snakeHead.node.x+48,this.snakeHead.node.y),1===this.gameState&&(this.snakeHead.node.x+=48)),1===this.gameState&&(this.eatFoot(),this.moveAll())},moveAll:function(){for(var t=this.snakeArrX.length-1;t>0;t--)this.snakeArrX[t]=this.snakeArrX[t-1],this.snakeArrY[t]=this.snakeArrY[t-1];this.snakeArrX[0]=this.snakeHead.node.x,this.snakeArrY[0]=this.snakeHead.node.y;for(var e=1;e<this.snakeArrX.length;e++)this.snakeArr[e].node.x=this.snakeArrX[e],this.snakeArr[e].node.y=this.snakeArrY[e];cc.log("moveAll"+this.snakeArrX.length)},onKeyDown:function(t){switch(t.keyCode){case cc.KEY.a:case cc.KEY.left:3!=this.direction&&(this.direction=2);break;case cc.KEY.d:case cc.KEY.right:2!=this.direction&&(this.direction=3);break;case cc.KEY.w:case cc.KEY.up:1!=this.direction&&(this.direction=0);break;case cc.KEY.s:case cc.KEY.down:0!=this.direction&&(this.direction=1)}},isGameOver:function(t,e){if(t<0||t>=480||e<0||e>=720)this.gameOver();else for(var s=0;s<this.snakeArrX.length;s++)if(this.snakeArrX[s]==t&&this.snakeArrY[s]==e)return void this.gameOver()},gameOver:function(){this.gameState=2,this.over.active=!0,this.unschedule(this.move),cc.audioEngine.stopAll()},pause:function(){2!==this.gameState&&(1===this.gameState?(this.gameState=0,this.button.string="Play",this.unschedule(this.move)):0===this.gameState&&(this.gameState=1,this.button.string="Pause",this.schedule(this.move,this.speed)))},replay:function(){cc.director.loadScene("snaker")}}),cc._RF.pop()},{}],rect:[function(t,e,s){"use strict";cc._RF.push(e,"20127cQSZ9N0bB8afm8IEjY","rect"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],"use_v2.0.x_cc.Toggle_event":[function(t,e,s){"use strict";cc._RF.push(e,"d149fmkRdtINpsf4RJ6lEpZ","use_v2.0.x_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_check=!0),cc._RF.pop()},{}]},{},["use_v2.0.x_cc.Toggle_event","build","rect"]);